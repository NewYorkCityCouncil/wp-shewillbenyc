"use strict";function handleImage(e){var t=new FileReader;t.onload=function(e){var t=new Image;t.onload=function(){EXIF.getData(this,function(){var e,t=EXIF.getTag(this,"Orientation");switch(t){case 1:e=0;break;case 2:e=0;break;case 3:e=180;break;case 4:e=180;break;case 5:e=90;break;case 6:e=90;break;case 7:e=-90;break;case 8:e=-90;break;default:e=0}});var e=new fabric.Image(t,{}),a=t.width,n=t.height;a>n?(e.set({scaleX:canvas.height/e.height,scaleY:canvas.height/e.height}),e.minScaleLimit=canvas.height/e.height,e.lockMovementY=!0):(e.set({scaleX:canvas.width/e.width,scaleY:canvas.width/e.width}),e.minScaleLimit=canvas.width/e.width,e.lockMovementX=!0),e.lockUniScaling=!0,e.lockRotation=!0,e.hasBorders=!1,e.hasControls=!1,canvas.add(e),canvas.centerObject(e),canvas.sendToBack(e),jQuery("#button--add-text").removeClass("button-off"),jQuery("#input-button").addClass("button-off")},t.src=e.target.result},t.readAsDataURL(e.target.files[0])}function memeText(e){canvas.add(userText),canvas.setActiveObject(userText),userText.enterEditing(),jQuery("#button--add-text").addClass("button-off")}function saveImage(e){canvas.deactivateAll().renderAll(),this.href=canvas.toDataURL({format:"jpeg",quality:.8}),this.download="shewillbe.jpg"}jQuery(document).foundation(),jQuery(document).ready(function(){function e(){jQuery(".intro-hashtag .heard").delay(t).fadeOut("fast",function(){jQuery(".intro-hashtag .word-2").fadeIn("slow",function(){jQuery(this).delay(t).fadeOut("fast",function(){jQuery(".intro-hashtag .word-3").fadeIn("slow",function(){jQuery(this).delay(t).fadeOut("fast",function(){jQuery(".intro-hashtag .word-4").fadeIn("slow",function(){jQuery(this).delay(t).fadeOut("fast",function(){jQuery(".intro-hashtag .word-5").fadeIn("slow",function(){jQuery(this).delay(t).fadeOut("fast",function(){jQuery(".intro-hashtag .heard").fadeIn("slow",e)})})})})})})})})})}jQuery("#toggle--all-partners-list").click(function(){jQuery("#all-partners-list").removeClass("show-for-print").slideToggle(),jQuery(this).parent("p").slideToggle()}),jQuery('<span class="word-2">strong</span>').appendTo("html:lang(en) .intro-hashtag").hide(),jQuery('<span class="word-3">healthy</span>').appendTo("html:lang(en) .intro-hashtag").hide(),jQuery('<span class="word-4">smart</span>').appendTo("html:lang(en) .intro-hashtag").hide(),jQuery('<span class="word-5">fearless</span>').appendTo("html:lang(en) .intro-hashtag").hide(),jQuery('<span class="word-2 tight-kern ellasera">fuerte</span>').appendTo("html:lang(es) .intro-hashtag").hide(),jQuery('<span class="word-3 tight-kern ellasera">saludable</span>').appendTo("html:lang(es) .intro-hashtag").hide(),jQuery('<span class="word-4 tight-kern ellasera">inteligente</span>').appendTo("html:lang(es) .intro-hashtag").hide(),jQuery('<span class="word-5 tight-kern ellasera">valiente</span>').appendTo("html:lang(es) .intro-hashtag").hide();var t=1500;setTimeout(function(){e()},2e3)});var canvas=new fabric.Canvas("canvas",{backgroundColor:"#333333"});fabric.Image.fromURL(themedir+"/assets/images/selfie-overlay.png",function(e){e.set({evented:!1,selectable:!1,left:0,top:0}),canvas.add(e)});var imageLoader=jQuery("input")[0];imageLoader.addEventListener("change",handleImage,!1),canvas.on("object:moving",function(){if("image"===canvas.getActiveObject().get("type")){var e=this.relatedTarget,t=e.getLeft(),a=e.getLeft()+e.getWidth(),n=e.getTop(),s=e.getTop()+e.getHeight();t>0&&e.setLeft("0"),a<canvas.width&&e.setLeft(canvas.width-e.getWidth()),n>0&&e.setTop("0"),s<canvas.height&&e.setTop(canvas.height-e.getHeight())}});var memeTextBtn=document.getElementById("button--add-text");memeTextBtn.addEventListener("click",memeText,!1);var userText=new fabric.IText("",{centeredScaling:!0,cursorColor:"#272727",cursorWidth:8,hoverCursor:"pointer",hasControls:!1,lockMovementX:!0,lockMovementY:!0,width:canvas.width,hasBorders:!1,fontFamily:"Permanent Marker",fontSize:180,fontStyle:"normal",fontWeight:"700",lineHeight:.7,fill:"#272727",opacity:.85,selectionColor:"rgba(153,243,255,0.5)",left:canvas.height/2,top:canvas.height-100,originY:"bottom",originX:"center",textAlign:"center"});canvas.on("text:changed",function(e){var t=e.target,a=t.getText(),n=t.getWidth(),s=t.getScaleX(),r=canvas.width-40,o=a.replace(/(\r\n|\n|\r)/gm,"");t.set({text:o}),o!=a&&t.moveCursorLeft(e),n>r?(t.scaleToWidth(r),t.setScaleY(1)):n<=r&&s<1?(t.scaleToWidth(r),t.setScaleY(1)):t.setScaleY(1);var i=userText.getText();i?jQuery("#button--save").removeClass("button-off"):jQuery("#button--save").addClass("button-off"),canvas.renderAll()}),userText.on("editing:exited",function(){var e=userText.getText();e||(jQuery("#button--add-text").removeClass("button-off"),jQuery("#button--save").addClass("button-off"),canvas.remove(userText))}),userText.on("editing:entered",function(){jQuery("#textarea-anchor").scrollintoview()});var imageSaver=document.getElementById("button--save");imageSaver.addEventListener("click",saveImage,!1);